// Generated by CoffeeScript 1.12.7
var addAllActionLinks, addItemFormActivateLink, addItemFormDeleteLink, addItemFormMoveLinks, itemType;

itemType = "coupon";

addAllActionLinks = function($itemFormLi) {
  addItemFormDeleteLink($itemFormLi);
  addItemFormActivateLink($itemFormLi);
  return addItemFormMoveLinks($itemFormLi);
};

addItemFormDeleteLink = function($itemFormLi) {
  var $removeFormA;
  $removeFormA = $itemFormLi.find('a.removeLink');
  return $removeFormA.on('click', function(e) {
    e.preventDefault();
    return $itemFormLi.remove();
  });
};

addItemFormActivateLink = function($itemFormLi) {
  var $activateFormA;
  $activateFormA = $itemFormLi.find('a.activateLink');
  return $activateFormA.on('click', function(e) {
    var $inputActivity;
    e.preventDefault();
    $inputActivity = $itemFormLi.find('input.coupon-activity');
    $itemFormLi.toggleClass("deactivated");
    if ($inputActivity.val() === '1') {
      $inputActivity.val('0');
      $itemFormLi.find('a.activateLink').text('Activate');
      return;
    }
    $inputActivity.val('1');
    return $itemFormLi.find('a.activateLink').text('Deactivate');
  });
};

addItemFormMoveLinks = function($itemFormLi) {
  $itemFormLi.find('a.upLink').on('click', function(e) {
    e.preventDefault();
    $itemFormLi.insertBefore($itemFormLi.prev());
    if ($(document).scrollTop() > $itemFormLi.position().top) {
      return $(document).scrollTop($itemFormLi.position().top);
    }
  });
  $itemFormLi.find('a.downLink').on('click', function(e) {
    e.preventDefault();
    $itemFormLi.insertAfter($itemFormLi.next());
    if ($(document).scrollTop() + $(window).height() - $itemFormLi.outerHeight() < $itemFormLi.position().top) {
      return $(document).scrollTop($itemFormLi.position().top - $(window).height() + $itemFormLi.outerHeight());
    }
  });
  $itemFormLi.find('a.firstLink').on('click', function(e) {
    e.preventDefault();
    $itemFormLi.insertBefore($('li.list-item').first());
    if ($(document).scrollTop() > $itemFormLi.position().top) {
      return $(document).scrollTop($itemFormLi.position().top);
    }
  });
  return $itemFormLi.find('a.lastLink').on('click', function(e) {
    e.preventDefault();
    $itemFormLi.insertAfter($('li.list-item').last());
    if ($(document).scrollTop() + $(window).height() - $itemFormLi.outerHeight() < $itemFormLi.position().top) {
      return $(document).scrollTop($itemFormLi.position().top - $(window).height() + $itemFormLi.outerHeight());
    }
  });
};

$(document).ready(function() {
  return $("#edit-coupons").on('submit', function(event) {
    event.preventDefault();
    $('ul.mutable-items').find("li.list-item .coupon-label").each(function() {
      return replaceSymbols($(this));
    });
    $('ul.mutable-items').find("li.list-item .coupon-code").each(function() {
      return replaceSymbols($(this));
    });
    return $(this).unbind('submit').submit();
  });
});
